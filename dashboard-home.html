<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Edge Factor Elite</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0b0f1a;
      --bg-secondary: #0f1629;
      --bg-card: #131b2e;
      --bg-card-hover: #182038;
      --accent: #6366f1;
      --accent-secondary: #818cf8;
      --accent-soft: rgba(99,102,241,0.12);
      --profit: #22c55e;
      --profit-soft: rgba(34,197,94,0.12);
      --loss: #ef4444;
      --loss-soft: rgba(239,68,68,0.12);
      --warning: #f59e0b;
      --warning-soft: rgba(245,158,11,0.12);
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-tertiary: #64748b;
      --text-muted: #475569;
      --border-subtle: rgba(148,163,184,0.08);
      --border: rgba(148,163,184,0.12);
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    body::before {
      content: '';
      position: fixed; top: -15%; left: -10%;
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(99,102,241,0.06) 0%, transparent 70%);
      pointer-events: none; z-index: 0;
    }
    body::after {
      content: '';
      position: fixed; bottom: -15%; right: -10%;
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(34,197,94,0.04) 0%, transparent 70%);
      pointer-events: none; z-index: 0;
    }

    .mono { font-family: 'JetBrains Mono', monospace; }

    /* ── Animations ── */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .anim { opacity: 0; animation: fadeInUp 0.5s ease-out forwards; }
    .d1 { animation-delay: 0.05s; }
    .d2 { animation-delay: 0.10s; }
    .d3 { animation-delay: 0.15s; }
    .d4 { animation-delay: 0.20s; }
    .d5 { animation-delay: 0.25s; }
    .d6 { animation-delay: 0.30s; }

    /* ── Auth Gate ── */
    .auth-gate {
      display: none;
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      z-index: 9000; background: var(--bg-primary);
      flex-direction: column; align-items: center; justify-content: center; gap: 16px;
    }
    .auth-gate.visible { display: flex; }
    .auth-gate .logo-mark { width: 48px; height: 48px; font-size: 16px; border-radius: 12px; margin-bottom: 8px; }
    .auth-gate h2 { font-size: 24px; font-weight: 700; color: var(--text-primary); }
    .auth-gate p { font-size: 14px; color: var(--text-secondary); margin-bottom: 12px; }
    .google-btn {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 12px 28px; border-radius: var(--radius-md); border: 1px solid var(--border);
      background: var(--bg-card); color: var(--text-primary); font-family: inherit;
      font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;
    }
    .google-btn:hover { background: var(--bg-card-hover); border-color: var(--accent); }

    /* ── Navigation ── */
    .nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
      height: 60px; background: rgba(11,15,26,0.85);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-subtle);
    }
    .nav-inner {
      max-width: 1280px; margin: 0 auto; padding: 0 24px;
      display: flex; align-items: center; justify-content: space-between; height: 100%;
    }
    .nav-left { display: flex; align-items: center; gap: 12px; text-decoration: none; }
    .logo-mark {
      width: 32px; height: 32px; border-radius: 8px;
      background: linear-gradient(135deg, #6366f1, #818cf8);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 11px; color: #fff; flex-shrink: 0;
      font-family: 'JetBrains Mono', monospace;
    }
    .logo-text { font-size: 15px; font-weight: 700; color: var(--text-primary); white-space: nowrap; }
    .logo-text span { color: var(--accent-secondary); }

    .nav-center { display: flex; align-items: center; gap: 4px; }
    .nav-link {
      color: var(--text-tertiary); text-decoration: none; font-size: 13px; font-weight: 500;
      padding: 8px 14px; border-radius: var(--radius-sm); transition: all 0.2s; position: relative;
    }
    .nav-link:hover { color: var(--text-secondary); background: rgba(148,163,184,0.06); }
    .nav-link.active { color: var(--text-primary); font-weight: 600; }
    .nav-link.active::after {
      content: ''; position: absolute; bottom: -13px; left: 12px; right: 12px;
      height: 2px; background: var(--accent); border-radius: 1px;
    }

    .nav-right { position: relative; }
    .dropdown-trigger {
      display: flex; align-items: center; gap: 8px; padding: 5px 10px 5px 5px;
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: 24px; cursor: pointer; transition: border-color 0.2s; user-select: none;
    }
    .dropdown-trigger:hover { border-color: var(--border); }
    .dropdown-trigger.open { border-color: var(--accent); }
    .dropdown-avatar {
      width: 30px; height: 30px; border-radius: 50%;
      background: linear-gradient(135deg, #6366f1, #a78bfa);
      display: flex; align-items: center; justify-content: center;
      color: #fff; font-weight: 700; font-size: 12px; flex-shrink: 0;
    }
    .dropdown-trigger-name { font-size: 13px; font-weight: 600; color: var(--text-primary); }
    .dropdown-chevron {
      font-size: 10px; color: var(--text-tertiary); transition: transform 0.2s;
    }
    .dropdown-trigger.open .dropdown-chevron { transform: rotate(180deg); }

    .user-dropdown {
      position: absolute; top: calc(100% + 8px); right: 0; width: 240px;
      background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius-md); padding: 8px 0;
      opacity: 0; transform: translateY(-8px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      pointer-events: none; z-index: 1001;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
    }
    .user-dropdown.open { opacity: 1; transform: translateY(0); pointer-events: auto; }
    .dropdown-user { padding: 12px 16px; border-bottom: 1px solid var(--border-subtle); }
    .dropdown-name { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
    .dropdown-email {
      font-size: 12px; color: var(--text-tertiary); white-space: nowrap;
      overflow: hidden; text-overflow: ellipsis; max-width: 208px; margin-bottom: 8px;
    }
    .dropdown-tier {
      display: inline-block; font-size: 10px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.05em; padding: 2px 8px; border-radius: 10px;
      background: var(--accent-soft); color: var(--accent-secondary);
    }
    .dropdown-divider { height: 1px; background: var(--border-subtle); margin: 4px 0; }
    .dropdown-item {
      display: block; width: 100%; padding: 8px 16px; font-size: 13px; font-weight: 500;
      color: var(--text-secondary); background: none; border: none;
      text-decoration: none; text-align: left; cursor: pointer;
      font-family: inherit; transition: all 0.15s;
    }
    .dropdown-item:hover { color: var(--text-primary); background: rgba(148,163,184,0.06); }
    .dropdown-item.danger:hover { color: var(--loss); background: var(--loss-soft); }

    /* ── Mobile ── */
    .mobile-btn {
      display: none; background: none; border: none; color: var(--text-secondary);
      cursor: pointer; padding: 8px; border-radius: var(--radius-sm);
    }
    .mobile-btn svg { width: 22px; height: 22px; display: block; }
    .mobile-drawer {
      display: none; position: fixed; top: 60px; left: 0; right: 0; z-index: 999;
      background: rgba(11,15,26,0.98); backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-subtle); padding: 8px 16px 16px;
    }
    .mobile-drawer.open { display: block; }
    .mobile-drawer a {
      display: block; padding: 12px 16px; color: var(--text-secondary);
      text-decoration: none; font-size: 15px; font-weight: 500;
      border-radius: var(--radius-sm); transition: all 0.15s;
    }
    .mobile-drawer a:hover, .mobile-drawer a.active {
      color: var(--text-primary); background: rgba(148,163,184,0.06);
    }
    .mobile-drawer a.active { border-left: 2px solid var(--accent); }

    /* ── Page Layout ── */
    .page { max-width: 1280px; margin: 0 auto; padding: 84px 24px 48px; position: relative; z-index: 1; }

    .page-header { margin-bottom: 28px; }
    .page-greeting {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.08em; color: var(--accent-secondary); margin-bottom: 4px;
    }
    .page-title { font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
    .page-subtitle { font-size: 13px; color: var(--text-tertiary); display: flex; align-items: center; gap: 0; flex-wrap: wrap; }
    .subtitle-sep { width: 1px; height: 14px; background: var(--border); margin: 0 12px; flex-shrink: 0; }

    /* ── Portfolio Hero ── */
    .hero-grid {
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 28px;
    }
    .stat-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 20px;
      border-top: 2px solid transparent;
      transition: all 0.25s ease;
    }
    .stat-card:hover {
      transform: translateY(-1px); border-color: var(--border);
      box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    }
    .stat-card:nth-child(1):hover { border-top-color: var(--accent); }
    .stat-card:nth-child(2):hover { border-top-color: var(--profit); }
    .stat-card:nth-child(3):hover { border-top-color: var(--accent); }
    .stat-card:nth-child(4):hover { border-top-color: #3b82f6; }
    .stat-icon {
      width: 28px; height: 28px; border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
      font-size: 13px; margin-bottom: 12px;
    }
    .stat-icon.indigo { background: var(--accent-soft); }
    .stat-icon.green { background: var(--profit-soft); }
    .stat-icon.blue { background: rgba(59,130,246,0.12); }
    .stat-label {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.05em; color: var(--text-tertiary); margin-bottom: 6px;
    }
    .stat-value {
      font-family: 'JetBrains Mono', monospace; font-size: 26px; font-weight: 700;
      color: var(--text-primary); line-height: 1; margin-bottom: 6px;
    }
    .stat-change { font-size: 12px; color: var(--text-muted); }
    .stat-change.profit { color: var(--profit); }
    .stat-change.loss { color: var(--loss); }

    /* ── Content Grid ── */
    .content-grid {
      display: grid; grid-template-columns: 1fr 380px; gap: 24px;
    }

    /* ── Section Headers ── */
    .section { margin-bottom: 24px; }
    .section-header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 16px;
    }
    .section-title { font-size: 16px; font-weight: 700; color: var(--text-primary); }
    .section-link {
      font-size: 12px; font-weight: 600; color: var(--accent-secondary);
      text-decoration: none; transition: color 0.2s;
    }
    .section-link:hover { color: var(--accent); }

    /* ── Model Cards ── */
    .models-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .model-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 18px; text-decoration: none;
      border-top: 2px solid transparent;
      transition: all 0.25s ease; display: block; position: relative; overflow: hidden;
    }
    .model-card:hover {
      transform: translateY(-1px); border-color: var(--border);
      box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    }
    .model-card.nba:hover { border-top-color: var(--loss); }
    .model-card.ncaab:hover { border-top-color: #3b82f6; }
    .model-card.nhl:hover { border-top-color: var(--profit); }
    .model-card.props:hover { border-top-color: var(--accent); }
    .model-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }
    .model-badge {
      font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.04em;
      padding: 3px 8px; border-radius: var(--radius-sm);
    }
    .model-badge.nba { background: var(--loss-soft); color: var(--loss); }
    .model-badge.ncaab { background: rgba(59,130,246,0.12); color: #60a5fa; }
    .model-badge.nhl { background: var(--profit-soft); color: var(--profit); }
    .model-badge.props { background: var(--accent-soft); color: var(--accent-secondary); }
    .model-status {
      display: flex; align-items: center; gap: 5px;
      font-size: 11px; color: var(--text-tertiary);
    }
    .model-dot {
      width: 6px; height: 6px; border-radius: 50%; background: var(--profit);
      box-shadow: 0 0 6px rgba(34,197,94,0.4);
    }
    .model-name { font-size: 15px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; }
    .model-stats { display: flex; gap: 20px; margin-bottom: 14px; }
    .model-stat-label { font-size: 10px; font-weight: 600; text-transform: uppercase; color: var(--text-muted); margin-bottom: 2px; }
    .model-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 15px; font-weight: 600; color: var(--text-primary); }
    .model-bar { height: 3px; background: rgba(148,163,184,0.08); border-radius: 2px; overflow: hidden; }
    .model-bar-fill {
      height: 100%; border-radius: 2px; min-width: 2px;
      transition: width 0.8s cubic-bezier(0.4,0,0.2,1);
    }
    .model-bar-fill.excellent { background: linear-gradient(90deg, var(--profit), #4ade80); }
    .model-bar-fill.good { background: linear-gradient(90deg, #6366f1, #818cf8); }

    /* ── Recent Picks ── */
    .pick-item {
      display: flex; align-items: center; gap: 12px;
      padding: 11px 0; border-bottom: 1px solid var(--border-subtle);
    }
    .pick-item:last-child { border-bottom: none; }
    .pick-badge {
      font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 700;
      width: 28px; height: 28px; border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .pick-badge.win { background: var(--profit-soft); color: var(--profit); }
    .pick-badge.loss { background: var(--loss-soft); color: var(--loss); }
    .pick-badge.pending { background: rgba(148,163,184,0.08); color: var(--text-muted); }
    .pick-info { flex: 1; min-width: 0; }
    .pick-matchup { font-size: 13px; font-weight: 600; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .pick-meta { font-size: 11px; color: var(--text-muted); }
    .pick-edge {
      font-family: 'JetBrains Mono', monospace; font-size: 12px; font-weight: 600;
      color: var(--text-tertiary); flex-shrink: 0;
    }
    .picks-empty { padding: 24px 0; text-align: center; color: var(--text-muted); font-size: 13px; }

    /* ── Monthly Goal ── */
    .goal-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 20px; margin-bottom: 16px;
      border-top: 2px solid transparent;
      transition: all 0.25s ease;
    }
    .goal-card:hover {
      transform: translateY(-1px); border-color: var(--border); border-top-color: var(--accent);
      box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    }
    .goal-header { font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; }
    .goal-amount {
      font-family: 'JetBrains Mono', monospace; font-size: 20px; font-weight: 700;
      color: var(--text-primary); text-align: center; margin-bottom: 16px;
    }
    .goal-amount span { color: var(--text-muted); font-weight: 500; }
    .goal-ring-wrap { display: flex; justify-content: center; margin-bottom: 16px; }
    .goal-svg { display: block; }
    .goal-rows { margin-bottom: 12px; }
    .goal-row {
      display: flex; justify-content: space-between; align-items: center;
      padding: 6px 0; font-size: 13px;
    }
    .goal-row-label { color: var(--text-tertiary); }
    .goal-row-value { font-family: 'JetBrains Mono', monospace; font-weight: 600; color: var(--text-primary); font-size: 13px; }
    .goal-footer {
      font-size: 12px; color: var(--text-muted); text-align: center;
      padding-top: 10px; border-top: 1px solid var(--border-subtle);
    }

    /* ── Quick Actions ── */
    .actions-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 16px; margin-bottom: 16px;
    }
    .action-btn {
      display: flex; align-items: center; gap: 12px; padding: 10px 12px;
      background: none; border: none; border-radius: var(--radius-md);
      text-decoration: none; color: var(--text-primary); width: 100%;
      font-family: inherit; cursor: pointer; transition: background 0.2s;
    }
    .action-btn:hover { background: rgba(148,163,184,0.06); }
    .action-icon {
      width: 32px; height: 32px; border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; flex-shrink: 0;
    }
    .action-icon.indigo { background: var(--accent-soft); }
    .action-icon.orange { background: var(--warning-soft); }
    .action-icon.green { background: var(--profit-soft); }
    .action-text { flex: 1; font-size: 13px; font-weight: 600; text-align: left; }
    .action-arrow {
      color: var(--text-muted); font-size: 14px; transition: transform 0.2s;
    }
    .action-btn:hover .action-arrow { transform: translateX(3px); }

    /* ── Platform Status ── */
    .status-card {
      background: var(--bg-card); border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg); padding: 20px;
    }
    .status-card:hover {
      border-color: var(--border);
    }
    .status-title { font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 14px; }
    .status-row {
      display: flex; align-items: center; justify-content: space-between;
      padding: 7px 0; font-size: 13px;
    }
    .status-left { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); }
    .status-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .status-dot.active { background: var(--profit); box-shadow: 0 0 6px rgba(34,197,94,0.4); }
    .status-dot.idle { background: var(--text-muted); }
    .status-val { font-size: 12px; font-weight: 600; color: var(--text-tertiary); }
    .status-val.live { color: var(--profit); }

    /* ── Responsive ── */
    @media (max-width: 1024px) {
      .content-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 768px) {
      .hero-grid { grid-template-columns: 1fr 1fr; }
      .models-grid { grid-template-columns: 1fr; }
      .nav-center { display: none; }
      .mobile-btn { display: block; }
      .page { padding: 76px 16px 32px; }
    }
    @media (max-width: 480px) {
      .hero-grid { grid-template-columns: 1fr; }
      .page-title { font-size: 22px; }
      .dropdown-trigger-name { display: none; }
    }
  </style>
</head>
<body>

  <!-- Auth Gate -->
  <div class="auth-gate" id="auth-gate">
    <div class="logo-mark">EF</div>
    <h2>Edge Factor Elite</h2>
    <p>AI-powered sports investment platform</p>
    <button class="google-btn" id="google-btn">
      <svg width="18" height="18" viewBox="0 0 48 48">
        <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
        <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
        <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
        <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
      </svg>
      Sign in with Google
    </button>
  </div>

  <!-- Navigation -->
  <nav class="nav" id="main-nav" style="display:none">
    <div class="nav-inner">
      <a href="dashboard-home.html" class="nav-left">
        <div class="logo-mark">EF</div>
        <span class="logo-text">Edge Factor <span>Elite</span></span>
      </a>
      <div class="nav-center">
        <a href="dashboard-home.html" class="nav-link active">Dashboard</a>
        <a href="dashboard.html" class="nav-link">Projections</a>
        <a href="dashboard.html#props" class="nav-link">Props</a>
        <a href="results.html" class="nav-link">Results</a>
      </div>
      <div class="nav-right">
        <div class="dropdown-trigger" id="dropdown-trigger" onclick="window.toggleDropdown()">
          <div class="dropdown-avatar" id="nav-avatar"></div>
          <span class="dropdown-trigger-name" id="nav-name"></span>
          <span class="dropdown-chevron">&#9662;</span>
        </div>
        <div class="user-dropdown" id="user-dropdown">
          <div class="dropdown-user">
            <div class="dropdown-name" id="dd-name">User</div>
            <div class="dropdown-email" id="dd-email">user@email.com</div>
            <span class="dropdown-tier">Free</span>
          </div>
          <div class="dropdown-divider"></div>
          <a href="profile.html" class="dropdown-item">Settings</a>
          <a href="profile.html" class="dropdown-item">Investment Profile</a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item danger" id="signout-btn">Sign Out</button>
        </div>
        <button class="mobile-btn" id="mobile-btn" aria-label="Menu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile Drawer -->
  <div class="mobile-drawer" id="mobile-drawer">
    <a href="dashboard-home.html" class="active">Dashboard</a>
    <a href="dashboard.html">Projections</a>
    <a href="dashboard.html#props">Props</a>
    <a href="results.html">Results</a>
  </div>

  <!-- Main Content -->
  <main class="page" id="main-content" style="display:none">

    <!-- Page Header -->
    <div class="page-header anim d1">
      <div class="page-greeting" id="greeting">GOOD MORNING</div>
      <h1 class="page-title">Portfolio Overview</h1>
      <p class="page-subtitle">
        Your investment performance at a glance
        <span class="subtitle-sep"></span>
        <span id="header-date"></span>
      </p>
    </div>

    <!-- Portfolio Hero -->
    <div class="hero-grid anim d2">
      <div class="stat-card">
        <div class="stat-icon indigo">&#128176;</div>
        <div class="stat-label">Portfolio Value</div>
        <div class="stat-value" id="stat-portfolio">&#8212;</div>
        <div class="stat-change">from invested capital</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon green">&#128200;</div>
        <div class="stat-label">Monthly P&amp;L</div>
        <div class="stat-value" id="stat-pnl">&#8212;</div>
        <div class="stat-change" id="stat-pnl-change">this month</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon indigo">&#127919;</div>
        <div class="stat-label">Win Rate</div>
        <div class="stat-value" id="stat-winrate">&#8212;</div>
        <div class="stat-change">across all models</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon blue">&#128203;</div>
        <div class="stat-label">Today's Picks</div>
        <div class="stat-value" id="stat-picks">&#8212;</div>
        <div class="stat-change">predictions locked</div>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Left Column -->
      <div class="content-left">

        <!-- Model Performance -->
        <div class="section anim d3">
          <div class="section-header">
            <div class="section-title">Model Performance</div>
            <a href="results.html" class="section-link">View All Results &rarr;</a>
          </div>
          <div class="models-grid">
            <a href="dashboard.html" class="model-card nba">
              <div class="model-top">
                <span class="model-badge nba">NBA</span>
                <div class="model-status"><div class="model-dot"></div> Live</div>
              </div>
              <div class="model-name">NBA Games Model</div>
              <div class="model-stats">
                <div><div class="model-stat-label">Win Rate</div><div class="model-stat-value" id="nba-rate">0.0%</div></div>
                <div><div class="model-stat-label">Record</div><div class="model-stat-value" id="nba-record">0-0</div></div>
              </div>
              <div class="model-bar"><div class="model-bar-fill good" id="nba-bar" style="width:0%"></div></div>
            </a>
            <a href="dashboard.html" class="model-card ncaab">
              <div class="model-top">
                <span class="model-badge ncaab">NCAAB</span>
                <div class="model-status"><div class="model-dot"></div> Live</div>
              </div>
              <div class="model-name">NCAAB Games Model</div>
              <div class="model-stats">
                <div><div class="model-stat-label">Win Rate</div><div class="model-stat-value" id="ncaab-rate">0.0%</div></div>
                <div><div class="model-stat-label">Record</div><div class="model-stat-value" id="ncaab-record">0-0</div></div>
              </div>
              <div class="model-bar"><div class="model-bar-fill good" id="ncaab-bar" style="width:0%"></div></div>
            </a>
            <a href="dashboard.html" class="model-card nhl">
              <div class="model-top">
                <span class="model-badge nhl">NHL</span>
                <div class="model-status"><div class="model-dot"></div> Live</div>
              </div>
              <div class="model-name">NHL Games Model</div>
              <div class="model-stats">
                <div><div class="model-stat-label">Win Rate</div><div class="model-stat-value" id="nhl-rate">0.0%</div></div>
                <div><div class="model-stat-label">Record</div><div class="model-stat-value" id="nhl-record">0-0</div></div>
              </div>
              <div class="model-bar"><div class="model-bar-fill good" id="nhl-bar" style="width:0%"></div></div>
            </a>
            <a href="dashboard.html#props" class="model-card props">
              <div class="model-top">
                <span class="model-badge props">PROPS</span>
                <div class="model-status"><div class="model-dot"></div> Live</div>
              </div>
              <div class="model-name">Player Props Engine</div>
              <div class="model-stats">
                <div><div class="model-stat-label">Win Rate</div><div class="model-stat-value" id="props-rate">0.0%</div></div>
                <div><div class="model-stat-label">Record</div><div class="model-stat-value" id="props-record">0-0</div></div>
              </div>
              <div class="model-bar"><div class="model-bar-fill good" id="props-bar" style="width:0%"></div></div>
            </a>
          </div>
        </div>

        <!-- Recent Picks -->
        <div class="section anim d4">
          <div class="section-header">
            <div class="section-title">Recent Picks</div>
            <a href="results.html" class="section-link">Full History &rarr;</a>
          </div>
          <div id="picks-list">
            <div class="picks-empty">Loading picks...</div>
          </div>
        </div>

      </div>

      <!-- Right Column (Sidebar) -->
      <div class="content-right">

        <!-- Monthly Goal -->
        <div class="goal-card anim d3">
          <div class="goal-header">Monthly Goal</div>
          <div class="goal-amount"><span id="goal-current">$0</span> <span>of <span id="goal-target">$500</span></span></div>
          <div class="goal-ring-wrap">
            <svg viewBox="0 0 100 100" width="100" height="100" class="goal-svg">
              <defs>
                <linearGradient id="ring-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#6366f1"/>
                  <stop offset="100%" stop-color="#22c55e"/>
                </linearGradient>
              </defs>
              <circle cx="50" cy="50" r="42" fill="none" stroke="rgba(148,163,184,0.08)" stroke-width="6"/>
              <circle id="goal-ring" cx="50" cy="50" r="42" fill="none" stroke="url(#ring-grad)" stroke-width="6"
                stroke-linecap="round" stroke-dasharray="263.89" stroke-dashoffset="263.89"
                transform="rotate(-90 50 50)" style="transition: stroke-dashoffset 1s cubic-bezier(0.4,0,0.2,1)"/>
              <text x="50" y="46" text-anchor="middle" fill="#f1f5f9" font-size="18" font-family="JetBrains Mono, monospace" font-weight="700" id="goal-pct-text">0%</text>
              <text x="50" y="62" text-anchor="middle" fill="#64748b" font-size="8" font-family="DM Sans, sans-serif" font-weight="600" letter-spacing="0.1em">GOAL</text>
            </svg>
          </div>
          <div class="goal-rows">
            <div class="goal-row"><span class="goal-row-label">Realized</span><span class="goal-row-value" id="goal-realized">$0</span></div>
            <div class="goal-row"><span class="goal-row-label">Pending</span><span class="goal-row-value" id="goal-pending">$0</span></div>
            <div class="goal-row"><span class="goal-row-label">Remaining</span><span class="goal-row-value" id="goal-remaining">$500</span></div>
          </div>
          <div class="goal-footer" id="goal-footer"></div>
        </div>

        <!-- Quick Actions -->
        <div class="actions-card anim d4">
          <a href="dashboard.html" class="action-btn">
            <div class="action-icon indigo">&#128202;</div>
            <span class="action-text">View Today's Picks</span>
            <span class="action-arrow">&rarr;</span>
          </a>
          <a href="dashboard.html#props" class="action-btn">
            <div class="action-icon orange">&#127942;</div>
            <span class="action-text">Player Props</span>
            <span class="action-arrow">&rarr;</span>
          </a>
          <a href="profile.html" class="action-btn">
            <div class="action-icon green">&#9881;</div>
            <span class="action-text">Investment Settings</span>
            <span class="action-arrow">&rarr;</span>
          </a>
        </div>

        <!-- Platform Status -->
        <div class="status-card anim d5">
          <div class="status-title">Platform Status</div>
          <div class="status-row"><span class="status-left"><span class="status-dot active"></span> NBA Model</span><span class="status-val live">Active</span></div>
          <div class="status-row"><span class="status-left"><span class="status-dot active"></span> NCAAB Model</span><span class="status-val live">Active</span></div>
          <div class="status-row"><span class="status-left"><span class="status-dot active"></span> NHL Model</span><span class="status-val live">Active</span></div>
          <div class="status-row"><span class="status-left"><span class="status-dot active"></span> Props Engine</span><span class="status-val live">Active</span></div>
          <div class="status-row"><span class="status-left"><span class="status-dot active"></span> Auto-Grading</span><span class="status-val live">Active</span></div>
          <div class="status-row"><span class="status-left"><span class="status-dot idle"></span> Next Pipeline</span><span class="status-val">3:00 AM EST</span></div>
        </div>

      </div>
    </div>
  </main>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js';
    import { getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, signOut } from 'https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js';
    import { getFirestore, doc, getDoc, setDoc, updateDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyDFpQKH7Et2RH8qScHiVRMrcnJnN7gUr6s",
      authDomain: "edge-factor-elite.firebaseapp.com",
      projectId: "edge-factor-elite",
      storageBucket: "edge-factor-elite.firebasestorage.app",
      messagingSenderId: "564892151498",
      appId: "1:564892151498:web:c4e69c28a4d15e88b94bb3"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const CUTOFF = '2026-02-27';

    // ── Helpers ──
    function getTrackedBets() {
      try { return JSON.parse(localStorage.getItem('efe_tracked_bets')) || []; }
      catch { return []; }
    }

    // ── Dropdown ──
    window.toggleDropdown = function() {
      document.getElementById('dropdown-trigger').classList.toggle('open');
      document.getElementById('user-dropdown').classList.toggle('open');
    };
    document.addEventListener('click', (e) => {
      const navRight = document.querySelector('.nav-right');
      if (navRight && !navRight.contains(e.target)) {
        document.getElementById('dropdown-trigger')?.classList.remove('open');
        document.getElementById('user-dropdown')?.classList.remove('open');
      }
    });

    // ── Mobile Menu ──
    document.getElementById('mobile-btn')?.addEventListener('click', () => {
      document.getElementById('mobile-drawer').classList.toggle('open');
    });

    // ── Google Sign-In ──
    document.getElementById('google-btn').addEventListener('click', async () => {
      try {
        const provider = new GoogleAuthProvider();
        await signInWithPopup(auth, provider);
      } catch (e) {
        console.error('Sign-in error:', e);
      }
    });

    // ── Sign Out ──
    document.getElementById('signout-btn').addEventListener('click', async () => {
      try { await signOut(auth); } catch (e) { console.error(e); }
      window.location.reload();
    });

    // ── Auth State ──
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        document.getElementById('auth-gate').classList.add('visible');
        document.getElementById('main-nav').style.display = 'none';
        document.getElementById('main-content').style.display = 'none';
        return;
      }

      document.getElementById('auth-gate').classList.remove('visible');
      document.getElementById('main-nav').style.display = '';
      document.getElementById('main-content').style.display = '';

      const name = user.displayName || user.email?.split('@')[0] || 'User';
      const firstName = name.split(' ')[0];
      const initial = firstName.charAt(0).toUpperCase();

      // Nav
      document.getElementById('nav-avatar').textContent = initial;
      document.getElementById('nav-name').textContent = firstName;

      // Dropdown
      document.getElementById('dd-name').textContent = name;
      document.getElementById('dd-email').textContent = user.email || '';

      // Greeting
      const hour = new Date().getHours();
      const greeting = hour < 12 ? 'GOOD MORNING' : hour < 18 ? 'GOOD AFTERNOON' : 'GOOD EVENING';
      document.getElementById('greeting').textContent = greeting;

      // Date
      const now = new Date();
      document.getElementById('header-date').textContent = now.toLocaleDateString('en-US', {
        month: 'long', day: 'numeric', year: 'numeric'
      });

      // Load profile + data
      const profile = await loadProfile(user.uid);
      renderPortfolioStats(profile);
      await loadData();
    });

    // ── Firestore Profile ──
    async function loadProfile(uid) {
      try {
        const snap = await getDoc(doc(db, 'users', uid));
        if (snap.exists()) {
          await updateDoc(doc(db, 'users', uid), { lastLogin: serverTimestamp() });
          return snap.data();
        }
      } catch (e) { console.error('Profile load error:', e); }
      return null;
    }

    // ── Portfolio Stats ──
    function renderPortfolioStats(profile) {
      let bankroll = profile?.settings?.bankroll || 0;
      let unitSize = profile?.settings?.unitSize || 10;
      let monthlyTarget = profile?.settings?.monthlyTarget || 500;

      if (!bankroll) {
        try {
          const ls = JSON.parse(localStorage.getItem('efe_user_settings')) || {};
          bankroll = ls.bankroll || 1000;
          unitSize = ls.unit_size || ls.unitSize || 10;
        } catch { bankroll = 1000; }
      }

      document.getElementById('stat-portfolio').textContent = '$' + bankroll.toLocaleString();

      // Monthly P&L
      const bets = getTrackedBets();
      const now = new Date();
      const monthStart = now.getFullYear() + '-' + String(now.getMonth() + 1).padStart(2, '0') + '-01';
      const settled = bets.filter(b => b.result && b.date >= monthStart);
      let pl = 0;
      for (const b of settled) {
        const stake = (parseFloat(b.units) || 1) * unitSize;
        if (b.result === 'win') {
          const odds = parseInt(b.odds) || -110;
          pl += odds > 0 ? stake * (odds / 100) : stake * (100 / Math.abs(odds));
        } else if (b.result === 'loss') pl -= stake;
      }
      const plSign = pl >= 0 ? '+' : '';
      document.getElementById('stat-pnl').textContent = plSign + '$' + Math.abs(pl).toFixed(0);
      const pnlEl = document.getElementById('stat-pnl');
      const pnlChangeEl = document.getElementById('stat-pnl-change');
      if (pl > 0) { pnlEl.style.color = 'var(--profit)'; pnlChangeEl.classList.add('profit'); }
      else if (pl < 0) { pnlEl.style.color = 'var(--loss)'; pnlChangeEl.classList.add('loss'); }
      pnlChangeEl.textContent = plSign + '$' + Math.abs(pl).toFixed(0) + ' this month';

      // Monthly Goal
      document.getElementById('goal-target').textContent = '$' + monthlyTarget;
      const realized = Math.max(0, pl);
      const pending = bets.filter(b => !b.result && b.status !== 'graded')
        .reduce((sum, b) => sum + ((parseFloat(b.units) || 1) * unitSize), 0);
      const remaining = Math.max(0, monthlyTarget - realized);
      const goalPct = monthlyTarget > 0 ? Math.min(100, (realized / monthlyTarget) * 100) : 0;

      document.getElementById('goal-current').textContent = '$' + realized.toFixed(0);
      document.getElementById('goal-realized').textContent = '$' + realized.toFixed(0);
      document.getElementById('goal-pending').textContent = '$' + pending.toFixed(0);
      document.getElementById('goal-remaining').textContent = '$' + remaining.toFixed(0);

      // Ring animation
      const circumference = 2 * Math.PI * 42;
      const offset = circumference * (1 - goalPct / 100);
      setTimeout(() => {
        document.getElementById('goal-ring').setAttribute('stroke-dashoffset', offset.toFixed(2));
        document.getElementById('goal-pct-text').textContent = goalPct.toFixed(0) + '%';
      }, 300);

      // Footer
      const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
      const daysLeft = Math.max(0, lastDay - now.getDate());
      const monthName = now.toLocaleDateString('en-US', { month: 'long' });
      document.getElementById('goal-footer').textContent = daysLeft + ' day' + (daysLeft !== 1 ? 's' : '') + ' left in ' + monthName;
    }

    // ── Data Loading ──
    async function loadData() {
      const [r1, r2, r3, r4, r5] = await Promise.allSettled([
        fetch('results.json?t=' + Date.now()).then(r => r.json()),
        fetch('ncaab_results.json?t=' + Date.now()).then(r => r.json()),
        fetch('nhl_results.json?t=' + Date.now()).then(r => r.json()),
        fetch('projections.json?t=' + Date.now()).then(r => r.json()),
        fetch('game_projections.json?t=' + Date.now()).then(r => r.json()),
      ]);

      const nbaData = r1.status === 'fulfilled' ? r1.value : null;
      const ncaabData = r2.status === 'fulfilled' ? r2.value : null;
      const nhlData = r3.status === 'fulfilled' ? r3.value : null;
      const propsJson = r4.status === 'fulfilled' ? r4.value : null;
      const gameJson = r5.status === 'fulfilled' ? r5.value : null;

      // Grade each model
      const nbaStats = grade('nba', nbaData, ['spreads', 'totals', 'moneylines']);
      const ncaabStats = grade('ncaab', ncaabData, ['spreads', 'totals', 'moneylines']);
      const nhlStats = grade('nhl', nhlData, ['spreads', 'totals', 'moneylines']);
      const propsStats = grade('props', nbaData, ['props']);

      // Overall win rate
      const totalW = nbaStats.w + ncaabStats.w + nhlStats.w + propsStats.w;
      const totalL = nbaStats.l + ncaabStats.l + nhlStats.l + propsStats.l;
      const totalT = totalW + totalL;
      const overallPct = totalT > 0 ? (totalW / totalT * 100).toFixed(1) : '0.0';
      document.getElementById('stat-winrate').textContent = overallPct + '%';

      // Today's picks
      const now = new Date();
      const todayStr = now.getFullYear() + '-' + String(now.getMonth() + 1).padStart(2, '0') + '-' + String(now.getDate()).padStart(2, '0');
      let pickCount = 0;
      if (gameJson?.date === todayStr) pickCount += gameJson.games?.length || 0;
      if (propsJson?.date === todayStr) pickCount += propsJson.projections?.length || 0;
      document.getElementById('stat-picks').textContent = pickCount;

      // Recent picks
      buildPicks(nbaData, ncaabData, nhlData);
    }

    function grade(prefix, data, cats) {
      let w = 0, l = 0;
      if (data?.days) {
        const days = data.days.filter(d => d.date >= CUTOFF);
        for (const d of days) {
          for (const cat of cats) {
            w += d[cat]?.wins || 0;
            l += d[cat]?.losses || 0;
          }
        }
      }
      const total = w + l;
      const pct = total > 0 ? (w / total * 100).toFixed(1) : '0.0';

      const rateEl = document.getElementById(prefix + '-rate');
      const recordEl = document.getElementById(prefix + '-record');
      const barEl = document.getElementById(prefix + '-bar');

      if (rateEl) rateEl.textContent = pct + '%';
      if (recordEl) recordEl.textContent = w + '-' + l;
      if (barEl) {
        barEl.style.width = Math.max(2, parseFloat(pct)) + '%';
        barEl.className = 'model-bar-fill ' + (parseFloat(pct) >= 65 ? 'excellent' : 'good');
      }
      return { w, l };
    }

    function buildPicks(nba, ncaab, nhl) {
      const allPicks = [];

      function addPicks(data, sport) {
        if (!data?.days) return;
        for (const d of data.days) {
          if (d.date < CUTOFF) continue;
          for (const p of (d.picks || [])) {
            allPicks.push({ ...p, sport });
          }
        }
      }

      addPicks(nba, 'NBA');
      addPicks(ncaab, 'NCAAB');
      addPicks(nhl, 'NHL');

      allPicks.sort((a, b) => (b.date || '').localeCompare(a.date || ''));
      const top6 = allPicks.slice(0, 6);

      const container = document.getElementById('picks-list');
      if (top6.length === 0) {
        container.innerHTML = '<div class="picks-empty">No graded picks yet. Results will appear after games finish.</div>';
        return;
      }

      container.innerHTML = top6.map(p => {
        const cls = p.hit === true ? 'win' : p.hit === false ? 'loss' : 'pending';
        const badge = p.hit === true ? 'W' : p.hit === false ? 'L' : '\u2014';
        const matchup = p.game || (p.player + ' ' + (p.prop || ''));
        const meta = p.sport + ' \u00B7 ' + (p.pick || '') + ' \u00B7 ' + (p.date || '');
        const edge = p.confidence ? p.confidence.toFixed(1) + '%' : '\u2014';
        return '<div class="pick-item">' +
          '<span class="pick-badge ' + cls + '">' + badge + '</span>' +
          '<div class="pick-info"><div class="pick-matchup">' + matchup + '</div><div class="pick-meta">' + meta + '</div></div>' +
          '<span class="pick-edge">' + edge + '</span></div>';
      }).join('');
    }
  </script>
</body>
</html>
